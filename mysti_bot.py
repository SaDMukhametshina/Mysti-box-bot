import os
import logging
import asyncio
from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è Railway
TOKEN = os.getenv('TOKEN', '8299693466:AAG0PQRjvAysOyX7MRlebiTWaxLzcL5hcjE')

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)

print("üîÑ –ó–∞–ø—É—Å–∫–∞—é –±–æ—Ç–∞ –Ω–∞ Railway...")
print("üîë –¢–æ–∫–µ–Ω: " + TOKEN[:10] + "...")

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
main_keyboard = [
    ["‚ùî –ß—Ç–æ —Ç–∞–∫–æ–µ Mysti Box", "üì¶ –ó–∞–∫–∞–∑–∞—Ç—å –±–æ–∫—Å"],
    ["üåç –ê—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç", "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã"],
    ["‚ú® –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏", "üõ´ –î–æ—Å—Ç–∞–≤–∫–∞"]
]
reply_markup = ReplyKeyboardMarkup(main_keyboard, resize_keyboard=True)

# URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
IMAGE_URLS = {
    "start": "https://t.me/mystiiiiiiiiiiiiiii/2",
    "about": "https://t.me/mystiiiiiiiiiiiiiii/10", 
    "order": "https://t.me/mystiiiiiiiiiiiiiii/9",
    "assortment": "https://t.me/mystiiiiiiiiiiiiiii/8",
    "contacts": "",
    "promo": "",
    "delivery": "https://t.me/mystiiiiiiiiiiiiiii/7"
}

# –ö–æ–º–∞–Ω–¥–∞ /start
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user = update.message.from_user
    print(f"üéØ –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ /start –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user.first_name} (ID: {user.id})")
    
    await update.message.reply_photo(
        photo=IMAGE_URLS["start"],
        caption=f"ü™ê –ü—Ä–∏–≤–µ—Ç, {user.first_name}! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Mysti Box!\n\n"
                "–ú—ã —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å —Å–∞–º—ã–µ –≤–∫—É—Å–Ω—ã–µ —Å–Ω–µ–∫–∏ –∏–∑ –°–®–ê üá∫üá∏, –ö–æ—Ä–µ–∏ üá∞üá∑, –Ø–ø–æ–Ω–∏–∏ üáØüáµ, –ò—Å–ø–∞–Ω–∏–∏ üá™üá∏, –ì–µ—Ä–º–∞–Ω–∏–∏ üá©üá™, –ö–∏—Ç–∞—è üá®üá≥ –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω üåè\n\n"
                "–í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª:",
        reply_markup=reply_markup,
        parse_mode='HTML'
    )
    print("‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ /start –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")

# –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    
    if text == "‚ùî –ß—Ç–æ —Ç–∞–∫–æ–µ Mysti Box":
        if IMAGE_URLS["about"]:
            await update.message.reply_photo(
                photo=IMAGE_URLS["about"],
                caption="<b>Mysti Box: –ú–∏—Ä –≤–∫—É—Å–æ–≤ —É –≤–∞—Å –Ω–∞ –ø–æ—Ä–æ–≥–µ!</b>üåç‚ú®\n\n"
                        "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –∫–æ—Ä–æ–±–∫—É, –∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî —Ü–µ–ª–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ. –•—Ä—É—Å—Ç—è—â–∏–µ —á–∏–ø—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–æ–∂–∞—é—Ç –≤ –ö–∏—Ç–∞–µ... –®–æ–∫–æ–ª–∞–¥–∫–∞, —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–æ–∏—Ç –ª–µ—Ç–µ—Ç—å –≤ –°–®–ê... –ù–∞–ø–∏—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—å—é—Ç –Ω–∞ –ø–ª—è–∂–∞—Ö –ò—Å–ø–∞–Ω–∏–∏... ‚ú®\n\n"
                        "–≠—Ç–æ –Ω–µ –º–µ—á—Ç–∞, —ç—Ç–æ <b>Mysti Box!</b>\n\n"
                        "–ú—ã —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å —Å–∞–º—ã–µ —Ç–æ–ø–æ–≤—ã–µ –∏ —Å–≤–µ–∂–∏–µ —Å–Ω–µ–∫–∏ –∏–∑ –°–®–ê, –Ø–ø–æ–Ω–∏–∏, –ì–µ—Ä–º–∞–Ω–∏–∏, –ê–Ω–≥–ª–∏–∏, –¢–∞–∏–ª–∞–Ω–¥–∞ –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω. –ö–∞–∂–¥—ã–π –±–æ–∫—Å ‚Äî —ç—Ç–æ:\n\n"
                        "‚Ä¢ –ù–æ–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è: –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–Ω–æ–µ, –Ω–æ –Ω–µ–∏–∑–º–µ–Ω–Ω–æ –≤–∫—É—Å–Ω–æ–µ.\n"
                        "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞: –¢–æ–ª—å–∫–æ —Ö–∏—Ç—ã –∏ –±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä—ã –∏–∑ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã.\n"  
                        "‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç –í–ê–£: –ò–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ —Å–µ–±–µ –∏–ª–∏ –¥—Ä—É–≥—É, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è.\n\n"
                        "<b>Mysti Box ‚Äî –ø–æ–ø—Ä–æ–±—É–π –º–∏—Ä –Ω–∞ –≤–∫—É—Å!</b>üíú",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
        else:
            await update.message.reply_text(
                "<b>Mysti Box: –ú–∏—Ä –≤–∫—É—Å–æ–≤ —É –≤–∞—Å –Ω–∞ –ø–æ—Ä–æ–≥–µ!</b>üåç‚ú®\n\n"
                "–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ: –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –∫–æ—Ä–æ–±–∫—É, –∞ –≤–Ω—É—Ç—Ä–∏ ‚Äî —Ü–µ–ª–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ. –•—Ä—É—Å—Ç—è—â–∏–µ —á–∏–ø—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–æ–∂–∞—é—Ç –≤ –ö–∏—Ç–∞–µ... –®–æ–∫–æ–ª–∞–¥–∫–∞, —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–æ–∏—Ç –ª–µ—Ç–µ—Ç—å –≤ –°–®–ê... –ù–∞–ø–∏—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø—å—é—Ç –Ω–∞ –ø–ª—è–∂–∞—Ö –ò—Å–ø–∞–Ω–∏–∏... ‚ú®\n\n"
                "–≠—Ç–æ –Ω–µ –º–µ—á—Ç–∞, —ç—Ç–æ <b>Mysti Box!</b>\n\n"
                "–ú—ã —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å —Å–∞–º—ã–µ —Ç–æ–ø–æ–≤—ã–µ –∏ —Å–≤–µ–∂–∏–µ —Å–Ω–µ–∫–∏ –∏–∑ –°–®–ê, –Ø–ø–æ–Ω–∏–∏, –ì–µ—Ä–º–∞–Ω–∏–∏, –ê–Ω–≥–ª–∏–∏, –¢–∞–∏–ª–∞–Ω–¥–∞ –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω. –ö–∞–∂–¥—ã–π –±–æ–∫—Å ‚Äî —ç—Ç–æ:\n\n"
                "‚Ä¢ –ù–æ–≤—ã–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è: –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–Ω–æ–µ, –Ω–æ –Ω–µ–∏–∑–º–µ–Ω–Ω–æ –≤–∫—É—Å–Ω–æ–µ.\n"
                "‚Ä¢ –ì–∞—Ä–∞–Ω—Ç–∏—è –∫–∞—á–µ—Å—Ç–≤–∞: –¢–æ–ª—å–∫–æ —Ö–∏—Ç—ã –∏ –±–µ—Å—Ç—Å–µ–ª–ª–µ—Ä—ã –∏–∑ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω—ã.\n"  
                "‚Ä¢ –≠—Ñ—Ñ–µ–∫—Ç –í–ê–£: –ò–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ —Å–µ–±–µ –∏–ª–∏ –¥—Ä—É–≥—É, –∫–æ—Ç–æ—Ä—ã–π —Ç–æ—á–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—Å—è.\n\n"
                "<b>Mysti Box ‚Äî –ø–æ–ø—Ä–æ–±—É–π –º–∏—Ä –Ω–∞ –≤–∫—É—Å!</b>üíú",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
                        "‚Ä¢ Pocky Strawberry ‚Äî –∫—É–ª—å—Ç–æ–≤—ã–µ —è–ø–æ–Ω—Å–∫–∏–µ –ø–∞–ª–æ—á–∫–∏\n"
                        "‚Ä¢ Hershey's ‚Äî –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –±–µ–ª—ã–π —à–æ–∫–æ–ª–∞–¥\n"
                        "‚Ä¢ Reese's Peanut Butter ‚Äî —Ç–æ–ø –°–®–ê —Å –∞—Ä–∞—Ö–∏—Å–æ–≤–æ–π –ø–∞—Å—Ç–æ–π\n"
                        "‚Ä¢ KitKat Peanut Butter ‚Äî —Ä–µ–¥–∫–∏–π –≤–∫—É—Å –ö–∏—Ç–ö–∞—Ç–∞\n"
                        "‚Ä¢ –ù–µ—Å–∫–≤–∏–∫ –≤–∞—Ñ–ª–∏ ‚Äî –Ω–µ–∂–Ω—ã–µ –º–æ–ª–æ—á–Ω—ã–µ –≤–∞—Ñ–µ–ª—å–∫–∏\n"
                        "‚Ä¢ Kinder Hippo ‚Äî –ª—é–±–∏–º—á–∏–∫ –≤–∑—Ä–æ—Å–ª—ã—Ö –∏ –¥–µ—Ç–µ–π\n\n"
                        "<b>üç™ –ü–µ—á–µ–Ω—å–µ –∏ —Å–Ω–µ–∫–∏:</b>\n"
                        "‚Ä¢ Maltesers Cookie ‚Äî —Ç–∞—é—â–µ–µ –ø–µ—á–µ–Ω—å–µ\n"
                        "‚Ä¢ M&M's Cookie ‚Äî –ø–µ—á–µ–Ω—å–µ —Å –¥—Ä–∞–∂–µ\n"
                        "‚Ä¢ –í–∞—Ñ–µ–ª—å–Ω—ã–µ —Ä–æ–ª–ª—ã Snickers –∏ Twix ‚Äî —Ö—Ä—É—Å—Ç—è—â–∞—è –Ω–æ–≤–∏–Ω–∫–∞\n\n"
                        "<b>üç¢ –ñ–≤–∞—á–∫–∏ –∏ —Å–ª–∞–¥–æ—Å—Ç–∏:</b>\n"
                        "‚Ä¢ Hubba Bubba Cola ‚Äî –±–æ–ª—å—à–∞—è –∂–≤–∞—á–∫–∞\n"
                        "‚Ä¢ Skittles Sour Squishy ‚Äî –º—è–≥–∫–∏–µ –∫–∏—Å–ª—ã–µ —Å–∫–∏—Ç–ª—Å\n"
                        "‚Ä¢ Fini —Å—É—Ñ–ª–µ ‚Äî –Ω–µ–∂–Ω—ã–µ –º–∞—Ä—à–º–µ–ª–ª–æ—É\n"
                        "‚Ä¢ Haribo —à–∏–ø—É—á–∏–µ —á–µ—Ä–≤—è—á–∫–∏\n\n"
                        "<b>ü•† –°–Ω–µ–∫–∏ –∏ –∞–∑–∏–∞—Ç—Å–∫–∏–µ –≤–∫—É—Å—ã:</b>\n"
                        "‚Ä¢ Lay's '–ë–ª–∏–Ω—ã —Å –ª—É–∫–æ–º' ‚Äî –Ω–µ–æ–±—ã—á–Ω—ã–π –∞–∑–∏–∞—Ç—Å–∫–∏–π –≤–∫—É—Å\n"
                        "‚Ä¢ '–ü–ª–æ–¥—ã —Å–º–µ—Ç–∞–Ω–Ω–æ–≥–æ —è–±–ª–æ–∫–∞' ‚Äî –Ω–æ–≤—ã–π —Ç—Ä–µ–Ω–¥\n"
                        "‚Ä¢ –õ–∞–ø—à–∞ Samyang Buldak Carbonara ‚Äî –ª–µ–≥–µ–Ω–¥–∞ –ö–æ—Ä–µ–∏\n\n"
                        "<b>üßã –ù–∞–ø–∏—Ç–∫–∏:</b>\n"
                        "‚Ä¢ –Ø–ø–æ–Ω—Å–∫–∞—è Hata Kosen ‚Äî –≥–∞–∑–∏—Ä–æ–≤–∫–∞\n"
                        "‚Ä¢ Fanta Chucky ‚Äî —Ä–µ–¥–∫–∏–µ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∫—É—Å—ã\n\n"
                        "–ò –µ—â—ë –¥–µ—Å—è—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤!üé¥",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
        else:
            await update.message.reply_text(
                "<b>üç´ –°–ª–∞–¥–æ—Å—Ç–∏ –∏ –±–∞—Ç–æ–Ω—á–∏–∫–∏:</b>\n"
                "‚Ä¢ Pocky Strawberry ‚Äî –∫—É–ª—å—Ç–æ–≤—ã–µ —è–ø–æ–Ω—Å–∫–∏–µ –ø–∞–ª–æ—á–∫–∏\n"
                "‚Ä¢ Hershey's ‚Äî –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –±–µ–ª—ã–π —à–æ–∫–æ–ª–∞–¥\n"
                "‚Ä¢ Reese's Peanut Butter ‚Äî —Ç–æ–ø –°–®–ê —Å –∞—Ä–∞—Ö–∏—Å–æ–≤–æ–π –ø–∞—Å—Ç–æ–π\n"
                "‚Ä¢ KitKat Peanut Butter ‚Äî —Ä–µ–¥–∫–∏–π –≤–∫—É—Å –ö–∏—Ç–ö–∞—Ç–∞\n"
                "‚Ä¢ –ù–µ—Å–∫–≤–∏–∫ –≤–∞—Ñ–ª–∏ ‚Äî –Ω–µ–∂–Ω—ã–µ –º–æ–ª–æ—á–Ω—ã–µ –≤–∞—Ñ–µ–ª—å–∫–∏\n"
                "‚Ä¢ Kinder Hippo ‚Äî –ª—é–±–∏–º—á–∏–∫ –≤–∑—Ä–æ—Å–ª—ã—Ö –∏ –¥–µ—Ç–µ–π\n\n"
                "<b>üç™ –ü–µ—á–µ–Ω—å–µ –∏ —Å–Ω–µ–∫–∏:</b>\n"
                "‚Ä¢ Maltesers Cookie ‚Äî —Ç–∞—é—â–µ–µ –ø–µ—á–µ–Ω—å–µ\n"
                "‚Ä¢ M&M's Cookie ‚Äî –ø–µ—á–µ–Ω—å–µ —Å –¥—Ä–∞–∂–µ\n"
                "‚Ä¢ –í–∞—Ñ–µ–ª—å–Ω—ã–µ —Ä–æ–ª–ª—ã Snickers –∏ Twix ‚Äî —Ö—Ä—É—Å—Ç—è—â–∞—è –Ω–æ–≤–∏–Ω–∫–∞\n\n"
                "<b>üç¢ –ñ–≤–∞—á–∫–∏ –∏ —Å–ª–∞–¥–æ—Å—Ç–∏:</b>\n"
                "‚Ä¢ Hubba Bubba Cola ‚Äî –±–æ–ª—å—à–∞—è –∂–≤–∞—á–∫–∞\n"
                "‚Ä¢ Skittles Sour Squishy ‚Äî –º—è–≥–∫–∏–µ –∫–∏—Å–ª—ã–µ —Å–∫–∏—Ç–ª—Å\n"
                "‚Ä¢ Fini —Å—É—Ñ–ª–µ ‚Äî –Ω–µ–∂–Ω—ã–µ –º–∞—Ä—à–º–µ–ª–ª–æ—É\n"
                "‚Ä¢ Haribo —à–∏–ø—É—á–∏–µ —á–µ—Ä–≤—è—á–∫–∏\n\n"
                "<b>ü•† –°–Ω–µ–∫–∏ –∏ –∞–∑–∏–∞—Ç—Å–∫–∏–µ –≤–∫—É—Å—ã:</b>\n"
                "‚Ä¢ Lay's '–ë–ª–∏–Ω—ã —Å –ª—É–∫–æ–º' ‚Äî –Ω–µ–æ–±—ã—á–Ω—ã–π –∞–∑–∏–∞—Ç—Å–∫–∏–π –≤–∫—É—Å\n"
                "‚Ä¢ '–ü–ª–æ–¥—ã —Å–º–µ—Ç–∞–Ω–Ω–æ–≥–æ —è–±–ª–æ–∫–∞' ‚Äî –Ω–æ–≤—ã–π —Ç—Ä–µ–Ω–¥\n"
                "‚Ä¢ –õ–∞–ø—à–∞ Samyang Buldak Carbonara ‚Äî –ª–µ–≥–µ–Ω–¥–∞ –ö–æ—Ä–µ–∏\n\n"
                "<b>üßã –ù–∞–ø–∏—Ç–∫–∏:</b>\n"
                "‚Ä¢ –Ø–ø–æ–Ω—Å–∫–∞—è Hata Kosen ‚Äî –≥–∞–∑–∏—Ä–æ–≤–∫–∞\n"
                "‚Ä¢ Fanta Chucky ‚Äî —Ä–µ–¥–∫–∏–µ –ª–∏–º–∏—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–∫—É—Å—ã\n\n"
                "–ò –µ—â—ë –¥–µ—Å—è—Ç–∫–∏ –¥—Ä—É–≥–∏—Ö —Å—é—Ä–ø—Ä–∏–∑–æ–≤!üé¥",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
    
    elif text == "üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã":
        if IMAGE_URLS["contacts"]:
            await update.message.reply_photo(
                photo=IMAGE_URLS["contacts"],
                caption="<b>üìû –ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n\n"
                        "üì± Instagram: mystibox.ru\n"
                        "üí¨ Telegram: @mystibox1\n\n"
                        "‚ö° –û—Ç–≤–µ—á–∞–µ–º –±—ã—Å—Ç—Ä–æ!",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
        else:
            await update.message.reply_text(
                "<b>üìû –ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã:</b>\n\n"
                "üì± Instagram: mystibox.ru\n"
                "üí¨ Telegram: @mystibox1\n\n"
                "‚ö° –û—Ç–≤–µ—á–∞–µ–º –±—ã—Å—Ç—Ä–æ!",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
    
    elif text == "‚ú® –ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏":
        if IMAGE_URLS["promo"]:

await update.message.reply_photo(
                photo=IMAGE_URLS["promo"],
                caption="üì¢ <b>–¢–µ–∫—É—â–∏–µ –∞–∫—Ü–∏–∏:</b>\n\n"
                        "‚Ä¢ –ü–†–ò–í–ï–î–ò –î–†–£–ì–ê ‚Äî —Å–∫–∏–¥–∫–∞ <b>300‚ÇΩ</b> –≤–∞–º –æ–±–æ–∏–º\n" 
                        "üíå –ò–¥–µ–∞–ª—å–Ω–æ –∫–∞–∫ –ø–æ–¥–∞—Ä–æ–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ:\n"
                        "‚úî –¥–∞—Ä–∏—Ç —ç–º–æ—Ü–∏–∏, —É–¥–∏–≤–ª–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç '–≤–∞—É'\n"
                        "‚úî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏ —Å–ª—É—á–∞—è\n"
                        "‚úî –º–æ–∂–Ω–æ –ø–æ–¥–∞—Ä–∏—Ç—å –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä–∞–¥–æ–≤–∞—Ç—å\n"
                        "‚úî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ ‚Äî –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Å–µ–º!\n\n"
                        "–ê–∫—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è, —É—Å–ø–µ–π –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è! üèÉüèª‚Äç‚ôÄÔ∏è",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
        else:
            await update.message.reply_text(
                "üì¢ <b>–¢–µ–∫—É—â–∏–µ –∞–∫—Ü–∏–∏:</b>\n\n"
                "‚Ä¢ –ü–†–ò–í–ï–î–ò –î–†–£–ì–ê ‚Äî —Å–∫–∏–¥–∫–∞ <b>300‚ÇΩ</b> –≤–∞–º –æ–±–æ–∏–º\n" 
                "üíå –ò–¥–µ–∞–ª—å–Ω–æ –∫–∞–∫ –ø–æ–¥–∞—Ä–æ–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ:\n"
                "‚úî –¥–∞—Ä–∏—Ç —ç–º–æ—Ü–∏–∏, —É–¥–∏–≤–ª–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç '–≤–∞—É'\n"
                "‚úî –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ª—é–±–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏ —Å–ª—É—á–∞—è\n"
                "‚úî –º–æ–∂–Ω–æ –ø–æ–¥–∞—Ä–∏—Ç—å –Ω–∞ –ø—Ä–∞–∑–¥–Ω–∏–∫ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä–∞–¥–æ–≤–∞—Ç—å\n"
                "‚úî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ ‚Äî –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Å–µ–º!\n\n"
                "–ê–∫—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è, —É—Å–ø–µ–π –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è! üèÉüèª‚Äç‚ôÄÔ∏è",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
    
    elif text == "üõ´ –î–æ—Å—Ç–∞–≤–∫–∞":
        if IMAGE_URLS["delivery"]:
            await update.message.reply_photo(
                photo=IMAGE_URLS["delivery"],
                caption="üõ´ <b>–°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏:</b>\n\n"
                        "‚Ä¢ –°–î–≠–ö ‚Äî 3-5 –¥–Ω–µ–π –ø–æ –†–æ—Å—Å–∏–∏\n"
                        "‚Ä¢ –ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏ ‚Äî 5-7 –¥–Ω–µ–π\n" 
                        "‚Ä¢ –Ø–Ω–¥–µ–∫—Å –î–æ—Å—Ç–∞–≤–∫–∞ ‚Äî 1-2 –¥–Ω—è –ø–æ –ö–∞–∑–∞–Ω–∏\n\n"
                        "üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ\n"
                        "üì¶ –ó–∞–∫–∞–∑ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
        else:
            await update.message.reply_text(
                "üõ´ <b>–°–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏:</b>\n\n"
                "‚Ä¢ –°–î–≠–ö ‚Äî 3-5 –¥–Ω–µ–π –ø–æ –†–æ—Å—Å–∏–∏\n"
                "‚Ä¢ –ü–æ—á—Ç–∞ –†–æ—Å—Å–∏–∏ ‚Äî 5-7 –¥–Ω–µ–π\n" 
                "‚Ä¢ –Ø–Ω–¥–µ–∫—Å –î–æ—Å—Ç–∞–≤–∫–∞ ‚Äî 1-2 –¥–Ω—è –ø–æ –ö–∞–∑–∞–Ω–∏\n\n"
                "üíµ –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ\n"
                "üì¶ –ó–∞–∫–∞–∑ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è!",
                reply_markup=reply_markup,
                parse_mode='HTML'
            )
    
    elif text == "‚Ü©Ô∏è –ù–∞–∑–∞–¥":
        await update.message.reply_text(
            "–í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
            reply_markup=reply_markup
        )
    
    else:
        await update.message.reply_text(
            "–ù–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª —Ç–µ–±—è ‚ò∫Ô∏è –í—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–∑ —Ä–∞–∑–¥–µ–ª–æ–≤ –º–µ–Ω—é:",
            reply_markup=reply_markup
        )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
async def error_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    logging.error(f"–û—à–∏–±–∫–∞: {context.error}")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ - –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è Railway
async def main():
    application = Application.builder().token(TOKEN).build()
    
    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
    application.add_handler(CommandHandler("start", start))
    application.add_handler(MessageHandler(filters.TEXT, handle_message))
    
    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
    application.add_error_handler(error_handler)
    
    print("üé¥ –ë–æ—Ç Mysti Box –∑–∞–ø—É—â–µ–Ω –Ω–∞ Railway! –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.")
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –±–æ—Ç–∞
    await application.run_polling()

if __name__ == "__main__":
    import asyncio
    asyncio.run(main())
